I"÷Z<h1 id="1-what-is-kind">1. What is Kind?</h1>

<p>Kind ëŠ” ë¡œì»¬ ì»´í“¨í„° í™˜ê²½ì— ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì†ì‰½ê³  ë¹ ë¥´ê²Œ ì„¤ì¹˜ í•˜ê¸° ìœ„í•´  ë§Œë“¤ì–´ì§„ ë„êµ¬ ì…ë‹ˆë‹¤.</p>

<p>KindëŠ” Go ì–¸ì–´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ ì¡Œìœ¼ë©°, Docker ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ <a href="https://github.com/kubernetes/kubeadm">kubeadm</a>ì„ ì´ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬ í•©ë‹ˆë‹¤.</p>

<p>kind ê³µì‹ í™ˆí˜ì´ì§€ : <a href="https://kind.sigs.k8s.io">kind.sigs.k8s.io</a></p>

<h1 id="2-kind-ì„¤ì¹˜-í•˜ê¸°">2. Kind ì„¤ì¹˜ í•˜ê¸°</h1>

<p>ì„¤ì¹˜ ê°€ì´ë“œ ì›ë³¸ URL : https://kind.sigs.k8s.io/docs/user/quick-start/#installation</p>

<h3 id="macos">MacOS</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>brew <span class="nb">install </span>kind
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="windows">Windows</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>choco <span class="nb">install </span>kind
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="linux">Linux</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>curl.exe <span class="nt">-Lo</span> kind-windows-amd64.exe https://kind.sigs.k8s.io/dl/v0.15.0/kind-windows-amd64
Move-Item .<span class="se">\k</span>ind-windows-amd64.exe c:<span class="se">\s</span>ome-dir-in-your-PATH<span class="se">\k</span>ind.exe
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="kind-ë¡œ-í´ëŸ¬ìŠ¤í„°-ìƒì„±-ì´ˆê°„ë‹¨">Kind ë¡œ í´ëŸ¬ìŠ¤í„° ìƒì„± (ì´ˆê°„ë‹¨)</h1>

<h3 id="í´ëŸ¬ìŠ¤í„°-ìƒì„±">í´ëŸ¬ìŠ¤í„° ìƒì„±</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>kind create cluster <span class="c"># Default cluster context ì´ë¦„ì€ 'kind' ë¡œ ìƒì„±</span>
kind create cluster <span class="nt">--name</span> dangtong <span class="c"># cluster context ì´ë¦„ì„ 'dangtong' ìœ¼ë¡œ ì§€ì •</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="í´ëŸ¬ìŠ¤í„°-ìƒì„±-í™•ì¸">í´ëŸ¬ìŠ¤í„° ìƒì„± í™•ì¸</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>kind get clusters
kubectl cluster-info <span class="nt">--context</span> dangtong
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="í´ëŸ¬ìŠ¤í„°-ì‚­ì œ">í´ëŸ¬ìŠ¤í„° ì‚­ì œ</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kind delete cluster
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="ì„¤ì •-íŒŒì¼ì„-ì´ìš©í•œ-kind-í´ëŸ¬ìŠ¤í„°-ìƒì„±">ì„¤ì • íŒŒì¼ì„ ì´ìš©í•œ Kind í´ëŸ¬ìŠ¤í„° ìƒì„±</h1>

<h3 id="í´ëŸ¬ìŠ¤í„°-ìƒì„±-1">í´ëŸ¬ìŠ¤í„° ìƒì„±</h3>

<h4 id="ì„¤ì •-íŒŒì¼ì„-ì´ìš©í•œ-í´ëŸ¬ìŠ¤í„°-ìƒì„±">ì„¤ì • íŒŒì¼ì„ ì´ìš©í•œ í´ëŸ¬ìŠ¤í„° ìƒì„±</h4>

<p>ì„¤ì •íŒŒì¼ì„ ì´ìš©í•´ì„œ kind í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kind create cluster <span class="nt">--config</span> kind-example-config.yaml
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="3ê°œ-ë…¸ë“œ-í´ëŸ¬ìŠ¤í„°-ìƒì„±">3ê°œ ë…¸ë“œ í´ëŸ¬ìŠ¤í„° ìƒì„±</h3>

<p>3ê°œ ë…¸ë“œ(1 controller, 2worker) í´ëŸ¬ìŠ¤í„° ì„¤ì •</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c"># three node (two workers) cluster config</span>
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
- role: worker
- role: worker
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="6ê°œ-ë…¸ë“œ-í´ëŸ¬ìŠ¤í„°-ìƒì„±">6ê°œ ë…¸ë“œ í´ëŸ¬ìŠ¤í„° ìƒì„±</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
- role: control-plane
- role: control-plane
- role: worker
- role: worker
- role: worker
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ë²„ì „-ì„¤ì •">ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ ì„¤ì •</h3>

<p>ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ì— ë”°ë¥¸ ì´ë¯¸ì§€ëŠ” ë§í¬ì—ì„œ í™•ì¸ ê°€ëŠ¥ : https://github.com/kubernetes-sigs/kind/releases</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  image: kindest/node:v1.16.4@sha256:b91a2c2317a000f3a783489dfb755064177dbc3a0b2f4147d50f04825d016f55
- role: worker
  image: kindest/node:v1.16.4@sha256:b91a2c2317a000f3a783489dfb755064177dbc3a0b2f4147d50f04825d016f55
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ë„¤íŠ¸ì›Œí¬-ì„¤ì •">ë„¤íŠ¸ì›Œí¬ ì„¤ì •</h3>

<ul>
  <li>Pod Subnet ì„¤ì •</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
networking:
  podSubnet: <span class="s2">"10.244.0.0/16"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Service Subnet ì„¤ì •</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
networking:
  serviceSubnet: <span class="s2">"10.96.0.0/12"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Default CNI ì„¤ì •</li>
</ul>

<p>Caliaco ì™„ ê°™ì€ 3rd party CNI ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” default CNI ì„¤ì¹˜ë¥¼ í•˜ì§€ ë§ì•„ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
networking:
  <span class="c"># default CNIê°€ ì„¤ì¹˜ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>
  disableDefaultCNI: <span class="nb">true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>kube-proxy ëª¨ë“œ ì„¤ì •</li>
</ul>

<p>iptables ë˜ëŠ” IPVS ì¤‘ì— ì„ íƒí•´ì„œ ì‚¬ìš© ê°€ëŠ¥. default ëŠ” iptables</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
networking:
  kubeProxyMode: <span class="s2">"ipvs"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="í´ëŸ¬ìŠ¤í„°-ìƒì„±-ì˜ˆì œ">í´ëŸ¬ìŠ¤í„° ìƒì„± ì˜ˆì œ</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="na">kind</span><span class="pi">:</span> <span class="s">Cluster</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kind.x-k8s.io/v1alpha4</span>
<span class="na">nodes</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">control-plane</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">kindest/node:v1.22.13@sha256:4904eda4d6e64b402169797805b8ec01f50133960ad6c19af45173a27eadf959</span>
  <span class="na">kubeadmConfigPatches</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="pi">|</span>
    <span class="s">kind: InitConfiguration</span>
    <span class="s">nodeRegistration:</span>
      <span class="s">kubeletExtraArgs:</span>
        <span class="s">node-labels: "ingress-ready=true"</span>
  <span class="na">extraPortMappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">hostPort</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
  <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">hostPort</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">worker</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">kindest/node:v1.22.13@sha256:4904eda4d6e64b402169797805b8ec01f50133960ad6c19af45173a27eadf959</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">worker</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">kindest/node:v1.22.13@sha256:4904eda4d6e64b402169797805b8ec01f50133960ad6c19af45173a27eadf959</span>
<span class="na">networking</span><span class="pi">:</span>
  <span class="na">serviceSubnet</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10.120.0.0/16"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="ingress-ë°-loadbalancer-ì„¤ì •">Ingress ë° LoadBalancer ì„¤ì •</h1>

<p>Ingress ë° Loadbalancer ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” KIND ë¥¼ ì´ìš©í•œ í´ëŸ¬ìŠ¤í„° ìƒì„±ì‹œ  extraPortMapping ì„¤ì •ì„ í•˜ê³ , kubeadmíˆ´ì„ í†µí•´ custom node label ì„ ë…¸ë“œì— ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<h3 id="ingress-ê°€ëŠ¥í•œ-í´ëŸ¬ìŠ¤í„°-ìƒì„±">Ingress ê°€ëŠ¥í•œ í´ëŸ¬ìŠ¤í„° ìƒì„±</h3>

<p>kind í´ëŸ¬ìŠ¤í„°ë¥¼ extraPortMappings ë° node-lables ì„¤ì •ê³¼ í•¨ê»˜ ìƒì„± í•©ë‹ˆë‹¤.</p>

<ul>
  <li>ExtreaPortMappings : ë¡œì»¬ í˜¸ìŠ¤íŠ¸ê°€ 80 ë° 443 í¬íŠ¸ë¥¼ í†µí•´ Ingress Controllerë¡œ ìš”ì²­ì´ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •í•©ë‹ˆë‹¤.</li>
  <li>nodeâ€“labels : Ingress Controller ê°€ íŠ¹ì • ë¼ë²¨ì„ ê°€ì§„ ë…¸ë“œì—ì„œë§Œ ìˆ˜í–‰ ë˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="s">cat &lt;&lt;EOF | kind create cluster --config=-</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Cluster</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kind.x-k8s.io/v1alpha4</span>
<span class="na">nodes</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">control-plane</span>
  <span class="na">kubeadmConfigPatches</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="pi">|</span>
    <span class="s">kind: InitConfiguration</span>
    <span class="s">nodeRegistration:</span>
      <span class="s">kubeletExtraArgs:</span>
        <span class="s">node-labels: "ingress-ready=true"</span>
  <span class="na">extraPortMappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">hostPort</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
  <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">hostPort</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
<span class="s">EOF</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="countour-ingress-ìƒì„±">Countour Ingress ìƒì„±</h3>

<ul>
  <li>Contour ì„¤ì¹˜</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl apply <span class="nt">-f</span> https://projectcontour.io/quickstart/contour.yaml
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Contour ì„¤ì • ì—…ë°ì´íŠ¸</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl patch daemonsets <span class="nt">-n</span> projectcontour envoy <span class="nt">-p</span> <span class="s1">'{"spec":{"template":{"spec":{"nodeSelector":{"ingress-ready":"true"},"tolerations":[{"key":"node-role.kubernetes.io/control-plane","operator":"Equal","effect":"NoSchedule"},{"key":"node-role.kubernetes.io/master","operator":"Equal","effect":"NoSchedule"}]}}}}'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="kong-ingress-ìƒì„±">Kong Ingress ìƒì„±</h3>

<ul>
  <li>Kong ì„¤ì¹˜</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl apply <span class="nt">-f</span> https://raw.githubusercontent.com/Kong/kubernetes-ingress-controller/master/deploy/single/all-in-one-dbless.yaml
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Kong ì„¤ì • ì—…ë°ì´íŠ¸</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl patch deployment <span class="nt">-n</span> kong ingress-kong <span class="nt">-p</span> <span class="s1">'{"spec":{"template":{"spec":{"containers":[{"name":"proxy","ports":[{"containerPort":8000,"hostPort":80,"name":"proxy","protocol":"TCP"},{"containerPort":8443,"hostPort":443,"name":"proxy-ssl","protocol":"TCP"}]}],"nodeSelector":{"ingress-ready":"true"},"tolerations":[{"key":"node-role.kubernetes.io/control-plane","operator":"Equal","effect":"NoSchedule"},{"key":"node-role.kubernetes.io/master","operator":"Equal","effect":"NoSchedule"}]}}}}'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="nginx-ingress-ìƒì„±">Nginx Ingress ìƒì„±</h3>

<ul>
  <li>Nginx ì„¤ì¹˜</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>kubectl apply <span class="nt">-f</span> https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Nginx ì„¤ì • ì—…ë°ì´íŠ¸</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>kubectl <span class="nb">wait</span> <span class="nt">--namespace</span> ingress-nginx <span class="se">\</span>
  <span class="nt">--for</span><span class="o">=</span><span class="nv">condition</span><span class="o">=</span>ready pod <span class="se">\</span>
  <span class="nt">--selector</span><span class="o">=</span>app.kubernetes.io/component<span class="o">=</span>controller <span class="se">\</span>
  <span class="nt">--timeout</span><span class="o">=</span>90s
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ingress-ì‚¬ìš©-ì˜ˆì œ">Ingress ì‚¬ìš© ì˜ˆì œ</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre></td><td class="rouge-code"><pre><span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">foo-app</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">foo</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">foo-app</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">hashicorp/http-echo:0.2.3</span>
    <span class="na">args</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">-text=foo"</span>
<span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">foo-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">foo</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="c1"># Default port used by the image</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">5678</span>
<span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">bar-app</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">bar</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">bar-app</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">hashicorp/http-echo:0.2.3</span>
    <span class="na">args</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">-text=bar"</span>
<span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">bar-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">bar</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="c1"># Default port used by the image</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">5678</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">example-ingress</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">http</span><span class="pi">:</span>
      <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/foo"</span>
        <span class="na">backend</span><span class="pi">:</span>
          <span class="na">service</span><span class="pi">:</span>
            <span class="na">name</span><span class="pi">:</span> <span class="s">foo-service</span>
            <span class="na">port</span><span class="pi">:</span>
              <span class="na">number</span><span class="pi">:</span> <span class="m">5678</span>
      <span class="pi">-</span> <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/bar"</span>
        <span class="na">backend</span><span class="pi">:</span>
          <span class="na">service</span><span class="pi">:</span>
            <span class="na">name</span><span class="pi">:</span> <span class="s">bar-service</span>
            <span class="na">port</span><span class="pi">:</span>
              <span class="na">number</span><span class="pi">:</span> <span class="m">5678</span>
<span class="nn">---</span>
</pre></td></tr></tbody></table></code></pre></div></div>

:ET